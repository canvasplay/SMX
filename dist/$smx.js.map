{"version":3,"sources":["../src/$smx.js"],"names":["global","$smx","__node_wrapper","apply","arguments","cache","elems","create_node","xmlNode","id","getAttribute","e","node","smx","Node","_","isArray","isUndefined","length","nodeType","result","i","push","window"],"mappings":";;AAAA,CAAC,UAASA,MAAT,EAAgB;;AAEf;;;;AAIA,gBAAIC,OAAO,SAAPA,IAAO,GAAU;AACnB,+BAAOC,eAAeC,KAAf,CAAqBF,IAArB,EAA2BG,SAA3B,CAAP;AACD,aAFD;;AAKA;;;;;;AAMAH,iBAAKI,KAAL,GAAa,EAAb;;AAGC;;;;;AAKC,gBAAIH,iBAAiB,SAAjBA,cAAiB,CAAUI,KAAV,EAAiB;;AAIlC,4BAAIC,cAAc,SAAdA,WAAc,CAAUC,OAAV,EAAmB;;AAEjC,wCAAIC,KAAK,IAAT;;AAEA;AACA;AACA;AACA;;AAEA;AACA,wCAAI;AACAA,qDAAKD,QAAQE,YAAR,CAAqB,IAArB,CAAL;AACH,qCAFD,CAEE,OAAOC,CAAP,EAAU,CAAE;;AAEd;AACA,wCAAI,CAACF,EAAL,EAAS;;AAET;AACA;AACA,wCAAIR,KAAKI,KAAL,CAAWI,EAAX,CAAJ,EAAoB,OAAOR,KAAKI,KAAL,CAAWI,EAAX,CAAP;;AAEpB;AACA,wCAAIG,OAAO,IAAIC,IAAIC,IAAR,CAAaN,OAAb,CAAX;;AAEA;AACAP,yCAAKI,KAAL,CAAWI,EAAX,IAAiBG,IAAjB;;AAEA;AACA,2CAAOA,IAAP;AAEH,yBA9BD;;AAmCA,4BAAIN,UAAUS,EAAEC,OAAF,CAAUV,KAAV,KAAoB,CAACS,EAAEE,WAAF,CAAcX,MAAMY,MAApB,CAA/B,KAA+DH,EAAEE,WAAF,CAAcX,MAAMa,QAApB,CAAnE,EAAkG;AAC9F,wCAAIC,SAAS,EAAb;AACA,yCAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIf,MAAMY,MAA1B,EAAkCG,GAAlC,EAAuC;AACnC,oDAAIf,MAAMe,CAAN,CAAJ,EAAc;AACV,gEAAIT,OAAQN,MAAMe,CAAN,EAAS,CAAT,CAAD,GAAgBf,MAAMe,CAAN,CAAhB,GAA2Bd,YAAYD,MAAMe,CAAN,CAAZ,CAAtC;AACA,gEAAIT,IAAJ,EAAUQ,OAAOE,IAAP,CAAYV,IAAZ;AACb;AACJ;AACD,2CAAOQ,MAAP;AACH,yBATD,MASO,IAAId,KAAJ,EAAW;AACd,wCAAIA,MAAM,CAAN,CAAJ,EAAc,OAAOA,KAAP,CAAd,KACK,OAAOC,YAAYD,KAAZ,CAAP;AACR,yBAHM,MAGA;AAEV,aArDD;;AAyDH;AACAN,mBAAOC,IAAP,GAAcA,IAAd;AAGA,CAtFD,EAsFGsB,MAtFH","file":"$smx.js","sourcesContent":["(function(global){\r\n\r\n  /**\r\n   * Global runtime namespace.\r\n   * @namespace $smx\r\n   */\r\n  var $smx = function(){\r\n    return __node_wrapper.apply($smx, arguments);\r\n  };\r\n  \r\n  \r\n  /**\r\n   * Runtime nodes cache. Contains an id key map of all processed nodes for\r\n   * easy acccess.\r\n   * @memberof $smx\r\n   * @type {Object}\r\n   */\r\n  $smx.cache = {};\r\n\r\n\r\n   /**\r\n    * Global node wrapper.\r\n    * @param {String=} selector\r\n    * @return {Node|Nodes[]}\r\n    */\r\n    var __node_wrapper = function (elems) {\r\n\r\n\r\n\r\n        var create_node = function (xmlNode) {\r\n\r\n            var id = null;\r\n\r\n            //if(!xmlNode) return;\r\n            //if (xmlNode.nodeName == 'undefined') return;\r\n            //if (typeof xmlNode.nodeType == 'undefined') return;\r\n            //if (xmlNode.nodeType != 1) return;\r\n\r\n            //can this try replace the 4 conditionals above? yes...\r\n            try {\r\n                id = xmlNode.getAttribute('id')\r\n            } catch (e) {}\r\n\r\n            //id attr is required!\r\n            if (!id) return;\r\n\r\n            //Does already exists a node with this id?\r\n            //prevent duplicated nodes and return existing one\r\n            if ($smx.cache[id]) return $smx.cache[id];\r\n\r\n            //create new Node from given XMLNode\r\n            var node = new smx.Node(xmlNode);\r\n\r\n            //add it to nodes cache\r\n            $smx.cache[id] = node;\r\n\r\n            //return just created node\r\n            return node;\r\n\r\n        };\r\n\r\n\r\n\r\n\r\n        if (elems && (_.isArray(elems) || !_.isUndefined(elems.length)) && _.isUndefined(elems.nodeType)) {\r\n            var result = [];\r\n            for (var i = 0; i < elems.length; i++) {\r\n                if (elems[i]) {\r\n                    var node = (elems[i][0]) ? elems[i] : create_node(elems[i]);\r\n                    if (node) result.push(node);\r\n                }\r\n            }\r\n            return result;\r\n        } else if (elems) {\r\n            if (elems[0]) return elems;\r\n            else return create_node(elems);\r\n        } else return;\r\n\r\n    };\r\n\r\n\r\n\r\n\t//expose global\r\n\tglobal.$smx = $smx;\r\n\r\n\r\n})(window);\r\n\r\n\r\n\t"]}