<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: <small>Source: </small>document/fn.Core.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--<link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/tranquil-heart.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<nav>
  <h2><a href="index.html">smx</a></h2><h3>Namespaces</h3><ul><li><a href="smx.html">smx</a></li><li><a href="smx.fn.html">smx.fn</a></li><li><a href="smx.fn.AttributeGetters.html">smx.fn.AttributeGetters</a></li><li><a href="smx.fn.Core.html">smx.fn.Core</a></li><li><a href="smx.time.html">smx.time</a></li><li><a href="smx.tracking.html">smx.tracking</a></li><li><a href="smx.tracking.attributes.html">smx.tracking.attributes</a></li></ul><h3>Classes</h3><ul><li><a href="Compiler.html">Compiler</a></li><li><a href="Loader.html">Loader</a></li><li><a href="Metadata.html">Metadata</a></li><li><a href="smx.Document.html">Document</a></li><li><a href="smx.Finder.html">Finder</a></li><li><a href="smx.Node.html">Node</a></li><li><a href="smx.Playhead.html">Playhead</a></li><li><a href="smx.time.Timeline.html">Timeline</a></li><li><a href="smx.time.Timer.html">Timer</a></li><li><a href="smx.tracking.TrackManager.html">TrackManager</a></li></ul><h3>Modules</h3><ul><li><a href="module-Node_Metadata.html">Node/Metadata</a></li><li><a href="module-Node_Time.html">Node/Time</a></li><li><a href="module-Node_Tracking.html">Node/Tracking</a></li><li><a href="module-Node_UI.html">Node/UI</a></li><li><a href="module-TimeAttrController.html">TimeAttrController</a></li><li><a href="module-UIAttrController.html">UIAttrController</a></li><li><a href="smx.fn.module_TreeNode.html">TreeNode</a></li></ul>

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on 2018-01-17T22:35:00.680Z
  </footer>
</nav>

<div id="main">

    <h1 class="page-title"><small>Source: </small>document/fn.Core.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>(function(global, _, Sizzle, smx){

/**
 * Extends SMXNode with core methods
 * @namespace Core
 * @memberof smx.fn
 */

let Core = {

    /**
     * Gets index position in matching sibling nodes
     * @method index
     * @memberof smx.fn.Core
     * @param {String=} selector - css selector filter
     * @return {Integer}
     */
    'index': function(selector){

        //0 by default
        var index = 0;

        //get parent node
        var parent = this.parent();

        //no parent? its kind of root so it has no sibling nodes
        if(!parent) return index;

        //get sibling nodes
        var siblings = parent.children();

        //filter siblings collection with a css selector if its defined
        if(selector) siblings = siblings.filter(function(s){
            return Sizzle.matchesSelector(s[0],selector)
        });

        //get position in siblings collection
        index = siblings.indexOf(this);

        return index;

    },

    /**
     * get String representation of a node
     * @method toString
     * @memberof smx.fn.Core
     * @return {String}
     */
    toString: function(){

        //this looks better in console
        return this.name + '#' + this.id;

    },

    /**
     * get node's text contents
     * @method text
     * @memberof smx.fn.Core
     * @return {String}
     */
    text: function(){
        return this[0].text || this[0].textContent || '';
    },
    
    /**
     * get node's html content
     * @method getInnerHTML
     * @memberof smx.fn.Core
     * @return {String}
     */
    getInnerHTML: function(){

        var childs = this[0].childNodes;

        var str = '';

        if (childs.length){
            _.each(childs,function(item,index){
                str+= item.xml || (new XMLSerializer()).serializeToString(item);
            });
        }

        return str;

    },
    
    /**
     * get JSON representation of a node
     * @method toJSON
     * @memberof smx.fn.Core
     * @return {Object}
     */
    toJSON: function(){

        var attrs = this[0].attributes;

        var json = {};

        json.id = this.id;

        json.name = this.name;

        json.url = this.get('url');
        json.uri = this.get('uri');

        //export meta
        json.meta = {};
        json.track = {};
       for(var i = 0; i &lt; attrs.length; i++) {

            var attr_name = attrs[i].name+'';
            var attr_value = attrs[i].name+'';

            if(attr_name.indexOf("meta-") === 0){
                attr_name = attr_name.substr(5);
                json.meta[attr_name] = attrs[i].value;
            }
            else if(attr_name.indexOf("track-") === 0){
                attr_name = attr_name.substr(6);
                json.track[attr_name] = attrs[i].value;
            }

        }

        //export children

        var childs = this.children();

        if(childs.length>0){

            json.children = [];

            for(var c=0; c&lt;childs.length;c++){

                json.children.push(childs[c].toJSON());

            }

        }


        return json;
    }





};

//extends smx fn methods
smx.fn = (!smx.fn) ? { Core } : Object.assign(smx.fn, { Core });



})(window, window._, window.Sizzle, window.smx);
</code></pre>
        </article>
    </section>




</div>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
