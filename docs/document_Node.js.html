<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">

  <title>JSDoc: <small>Source: </small>document/Node.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://cdn.rawgit.com/isagalaev/highlight.js/cf4b46e5/src/styles/default.css">
  <link rel="stylesheet" href="css/styles.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

</head>

<body>

<nav>
  <h2><a href="index.html">smx</a></h2><h3>Namespaces</h3><ul><li><a href="smx.html">smx</a></li><li><a href="smx.AttributeParsers.html">smx.AttributeParsers</a></li><li><a href="smx.NodeParsers.html">smx.NodeParsers</a></li><li><a href="smx.fn.html">smx.fn</a></li></ul><h3>Classes</h3><ul><li><a href="Compiler.html">Compiler</a></li><li><a href="smx.Document.html">Document</a></li><li><a href="smx.Finder.html">Finder</a></li><li><a href="smx.Node.html">Node</a></li><li><a href="smx.Playhead.html">Playhead</a></li></ul><h3>Modules</h3><ul><li><a href="module-MetadataParser.html">MetadataParser</a></li><li><a href="module-Node_UI.html">Node/UI</a></li><li><a href="module-UIAttrController.html">UIAttrController</a></li></ul><h3>Mixins</h3><ul><li><a href="Node-AttributeGetters.html">Node-AttributeGetters</a></li><li><a href="Node-Core.html">Node-Core</a></li><li><a href="Node-Metadata.html">Node-Metadata</a></li><li><a href="Node-TreeNode.html">Node-TreeNode</a></li></ul>

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on 2018-02-10T10:08:58.120Z
  </footer>
</nav>

<div id="main">

    <h1 class="page-title"><small>Source: </small>document/Node.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>(function (global, smx) {

/**
 * SMX Node Class
 * @memberof smx
 * @mixes smx.fn.Core
 * @mixes smx.fn.TreeNode
 */
class Node {

  /**
   * @param {XMLNode} xmlNode
   */
  constructor(xmlNode) {
      
      //require nodeType === 1 --> Node.ELEMENT_NODE
      if(xmlNode.nodeType!==1)
        throw(new Error('Node constructor requires ELEMENT_NODE'));
        
      /**
       * Original XMLNode for reference
       * @type {XMLNode}
       * @protected
       */
      this[0] = xmlNode;
  }

  /**
   * Direct access to XMLNode.id
   * @type {String}
   * @readonly
   */
  get id() {
      return this[0].id;
  }

  /**
   * Direct access to XMLNode name
   * @type {String}
   * @readonly
   */
  get name() {
      return this[0].nodeName;
  }

  /**
   * Gets node name based on inner XMLNode.nodeName,
   * default is `smx`, posible values are `txt`, `md`, `html`, ...
   * @type {String}
   * @readonly
   */
  get type() {
    if(this[0].getAttribute)
      return this[0].getAttribute('type') || 'smx';
    else
      return 'smx';
  }

  /**
   * Gets node className based on inner XMLNode class attribute
   * @type {String}
   * @readonly
   */
  get className() {
    if(this[0].getAttribute)
      return this[0].getAttribute('class');
    else
      return '';
  }
  
  /**
   * Gets the owner SMXDoxument
   * @type {SMXDocument}
   * @readonly
   */
  get document() {
      return this._document;
  }

  /**
   * Gets browser url hash
   * @type {String}
   * @readonly
   */
  get hash() {
      return '#!/' + this.uri;
  }


  /**
   * Gets Uniform Resource Identifier.
   * Concatenation of id values from parent nodes up to document root
   * @type {String}
   * @readonly
   */
  get uri() {
      let hash = this.id + '/';
      if (this.parent) return this.parent.uri + hash;
      else return hash;
  }


  /**
   * Gets Uniform Resource Locator
   * Concatenation of path values from parent nodes up to document root
   * @type {String}
   * @readonly
   */
  get url() {
    
    let path = this[0].getAttribute('path');
    var result;
    if (this.parent) {
      if (!path)
        result = this.parent.url;
      else {
        //add trail slash
        let trail = path.substr(-1);
        if (trail != '/') path += '/';
        result = this.parent.url + path;
      }
    } else {
      if (path){
        //add trail slash
        let trail = path.substr(-1);
        if (trail != '/') path += '/';
        result = path;
      }
    }
    if (result) result = result.replace(/\/\/+/g, '/');
    return result;
  }


  /**
   * Gets source file url for this node
   * @type {String}
   * @readonly
   */
  get src() {
    
    var result = '';
    let file = this[0].getAttribute('file');

    if (!file)
        result = (this.parent) ? this.parent.src : undefined;
    else
        result = this.url + file;

    if (result) result = result.replace(/\/\/+/g, '/');

    return result;

  }
  
  
  /**
   * Gets parent node
   * @type {SMXNode}
   * @readonly
   */
  get parent() {
    return this.document.wrap(this[0].parentNode);
  }

  /**
   * Gets ancestors nodes
   * @type {SMXNode[]}
   * @readonly
   */
  get ancestors() {
    var a = [];
    var p = this;
    while(p.parent){
      p = p.parent;
      a.push(p);
    }
    return a;
  }
  
  
  /**
   * Gets root node
   * @type {SMXNode}
   * @readonly
   */
  get root() {
    return this.ancestors[0] || this;
  }

  /**
   * Gets children nodes
   * @type {SMXNode[]}
   * @readonly
   */
  get children() {
    //non smx nodes should have no children
    if(this.type!=='smx') return [];
    else return this.document.wrap(this[0].childNodes);
  }

  /**
   * Gets first child node
   * @type {SMXNode}
   * @readonly
   */
  get first() {
    return this.children.shift();
  }

  /**
   * Gets last child node
   * @type {SMXNode}
   * @readonly
   */
  get last() {
    return this.children.pop();
  }

  
  /**
   * Gets previous sibling node
   * @type {SMXNode}
   * @readonly
   */
  get previous(){
    return this.document.wrap(this[0].previousElementSibling || this[0].previousSibling);
  }
  
  /**
   * Gets next sibling node
   * @type {SMXNode}
   * @readonly
   */
  get next(){
    return this.document.wrap(this[0].nextElementSibling || this[0].nextSibling);
  }

}

//inline property getter definition
//Object.defineProperty(Node.prototype, 'duration', { get: function() { return this.time('duration'); } });

//extends Node prototype
for (var key in smx.fn){
    Object.assign(Node.prototype, smx.fn[key]);
}

//expose
smx.Node = Node;


})(window, window.smx);</code></pre>
        </article>
    </section>




</div>

<div class="nav__overlay" onclick="$('body').removeClass('nav-visible');">
</div>

<a class="nav__toggle" href="javascript:$('body').toggleClass('nav-visible');">
  <i class="material-icons">menu</i>
</a>

<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
